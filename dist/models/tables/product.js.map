{"version":3,"sources":["../../../build/models/tables/product.js"],"names":["Object","defineProperty","exports","value","base_1","require","moment","unix_timestamp_now","valueOf","Product","sequelize","define","id","type","Sequelize","UUID","defaultValue","UUIDV1","primaryKey","shop_id","references","model","key","country_id","name","STRING","allowNull","picture","country","rating","DOUBLE","validate","min","link","price","maybe_duplicate","BOOLEAN","editable","not_in_use","reviews","unit_price","crawl_from","isIn","displayed_name","displayed_picture","displayed_country","displayed_rating","displayed_link","displayed_not_in_use","displayed_reviews","displayed_unit_price","displayed_price","vivino_id","BIGINT","vivino_image","JSONB","vivino_wine_id","vivino_year","vivino_winery","vivino_style","vivino_region","vivino_wine_type","displayed_vivino_winery","displayed_vivino_style","displayed_vivino_region","displayed_vivino_wine_type","displayed_vivino_food","displayed_vivino_grape","vivino_reviews","ARRAY","vivino_foods","vivino_grapes","vivino_wine_type_id","featured","ENUM","values","alcohol","vivino_url","TEXT","slug","status","created_at","literal","updated_at","deleted_at","hooks","beforeCreate","created_at_unix_timestamp","updated_at_unix_timestamp","beforeUpdate","timestamps","underscored","freezeTableName","paranoid","defaultScope","attributes","exclude","scopes","deleted","where","$ne"],"mappings":"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","file":"product.js","sourcesContent":["\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst base_1 = require(\"../base\");\nconst moment = require(\"moment\");\nvar unix_timestamp_now = moment().valueOf();\nexports.Product = base_1.sequelize.define('tbl_product', {\n    id: {\n        type: base_1.Sequelize.UUID,\n        defaultValue: base_1.Sequelize.UUIDV1,\n        primaryKey: true\n    },\n    shop_id: {\n        type: base_1.Sequelize.UUID,\n        references: {\n            model: 'tbl_shop',\n            key: 'id'\n        }\n    },\n    country_id: {\n        type: base_1.Sequelize.UUID,\n        references: {\n            model: 'tbl_country',\n            key: 'id'\n        }\n    },\n    name: {\n        type: base_1.Sequelize.STRING,\n        allowNull: true\n    },\n    type: {\n        type: base_1.Sequelize.STRING,\n    },\n    picture: {\n        type: base_1.Sequelize.STRING,\n        allowNull: true\n    },\n    country: {\n        type: base_1.Sequelize.STRING\n    },\n    rating: {\n        type: base_1.Sequelize.DOUBLE,\n        validate: {\n            min: 0,\n        }\n    },\n    link: {\n        type: base_1.Sequelize.STRING,\n        allowNull: false\n    },\n    price: {\n        type: base_1.Sequelize.DOUBLE(11),\n        defaultValue: 0,\n        validate: {\n            min: 0\n        },\n        allowNull: false\n    },\n    maybe_duplicate: {\n        type: base_1.Sequelize.BOOLEAN,\n        defaultValue: false,\n        allowNull: false\n    },\n    editable: {\n        type: base_1.Sequelize.BOOLEAN,\n        defaultValue: false\n    },\n    not_in_use: {\n        type: base_1.Sequelize.BOOLEAN,\n        defaultValue: false\n    },\n    reviews: {\n        type: base_1.Sequelize.DOUBLE,\n        validate: {\n            min: 0\n        }\n    },\n    unit_price: {\n        type: base_1.Sequelize.STRING,\n    },\n    crawl_from: {\n        type: base_1.Sequelize.STRING,\n        validate: {\n            isIn: [\n                ['NOW', 'VIVINO']\n            ]\n        },\n        defaultValue: 'NOW'\n    },\n    displayed_name: {\n        type: base_1.Sequelize.STRING,\n        allowNull: true\n    },\n    displayed_picture: {\n        type: base_1.Sequelize.STRING,\n        allowNull: true\n    },\n    displayed_country: {\n        type: base_1.Sequelize.STRING,\n        allowNull: true\n    },\n    displayed_rating: {\n        type: base_1.Sequelize.DOUBLE,\n        validate: {\n            min: 0,\n        }\n    },\n    displayed_link: {\n        type: base_1.Sequelize.STRING,\n        allowNull: true\n    },\n    displayed_not_in_use: {\n        type: base_1.Sequelize.BOOLEAN,\n        defaultValue: false\n    },\n    displayed_reviews: {\n        type: base_1.Sequelize.DOUBLE,\n        validate: {\n            min: 0\n        }\n    },\n    displayed_unit_price: {\n        type: base_1.Sequelize.STRING,\n    },\n    displayed_price: {\n        type: base_1.Sequelize.DOUBLE(11),\n        defaultValue: 0,\n        validate: {\n            min: 0\n        }\n    },\n    vivino_id: {\n        type: base_1.Sequelize.BIGINT(11),\n        defaultValue: 0\n    },\n    vivino_image: {\n        type: base_1.Sequelize.JSONB\n    },\n    vivino_wine_id: {\n        type: base_1.Sequelize.BIGINT(11),\n        defaultValue: 0\n    },\n    vivino_year: {\n        type: base_1.Sequelize.STRING,\n        defaultValue: 0\n    },\n    vivino_winery: {\n        type: base_1.Sequelize.JSONB\n    },\n    vivino_style: {\n        type: base_1.Sequelize.JSONB\n    },\n    vivino_region: {\n        type: base_1.Sequelize.JSONB\n    },\n    vivino_wine_type: {\n        type: base_1.Sequelize.JSONB\n    },\n    displayed_vivino_winery: {\n        type: base_1.Sequelize.STRING\n    },\n    displayed_vivino_style: {\n        type: base_1.Sequelize.STRING\n    },\n    displayed_vivino_region: {\n        type: base_1.Sequelize.STRING\n    },\n    displayed_vivino_wine_type: {\n        type: base_1.Sequelize.STRING\n    },\n    displayed_vivino_food: {\n        type: base_1.Sequelize.STRING\n    },\n    displayed_vivino_grape: {\n        type: base_1.Sequelize.STRING\n    },\n    vivino_reviews: {\n        type: base_1.Sequelize.ARRAY({ type: base_1.Sequelize.JSONB })\n    },\n    vivino_foods: {\n        type: base_1.Sequelize.ARRAY({ type: base_1.Sequelize.JSONB })\n    },\n    vivino_grapes: {\n        type: base_1.Sequelize.ARRAY({ type: base_1.Sequelize.JSONB })\n    },\n    vivino_wine_type_id: {\n        type: base_1.Sequelize.BIGINT(11),\n        defaultValue: 0\n    },\n    featured: {\n        type: base_1.Sequelize.ENUM,\n        values: ['NO', 'DAILY_DRINKS', 'EXTRAORDINARIES'],\n        defaultValue: 'NO'\n    },\n    alcohol: {\n        type: base_1.Sequelize.DOUBLE,\n        defaultValue: 0\n    },\n    vivino_url: {\n        type: base_1.Sequelize.TEXT\n    },\n    slug: {\n        type: base_1.Sequelize.TEXT\n    },\n    status: {\n        type: base_1.Sequelize.BOOLEAN,\n        defaultValue: true,\n        allowNull: false\n    },\n    created_at: {\n        type: 'TIMESTAMP',\n        defaultValue: base_1.Sequelize.literal('CURRENT_TIMESTAMP'),\n        allowNull: false\n    },\n    updated_at: {\n        type: 'TIMESTAMP',\n        defaultValue: base_1.Sequelize.literal('CURRENT_TIMESTAMP'),\n        allowNull: false\n    },\n    deleted_at: { type: 'TIMESTAMP' }\n}, {\n    hooks: {\n        beforeCreate: (model) => {\n            model.created_at_unix_timestamp = unix_timestamp_now;\n            model.updated_at_unix_timestamp = unix_timestamp_now;\n        },\n        beforeUpdate: (model) => {\n            model.updated_at_unix_timestamp = moment().valueOf();\n        },\n    },\n    timestamps: true,\n    underscored: true,\n    freezeTableName: true,\n    paranoid: true,\n    defaultScope: {\n        attributes: { exclude: ['deleted_at'] }\n    },\n    scopes: {\n        deleted: {\n            where: { deleted_at: { $ne: null } },\n            paranoid: false\n        }\n    }\n});\n//# sourceMappingURL=product.js.map"]}